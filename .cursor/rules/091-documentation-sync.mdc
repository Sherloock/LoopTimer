---
description: Maintain documentation synchronization across package.json, README, and tests
globs:
  - "package.json"
  - "package.json.scripts.md"
  - "README.md"
  - "**/*.test.{ts,tsx,js,jsx}"
  - "e2e/**/*.spec.ts"
---

## Documentation Synchronization (mandatory)

### Package.json Changes
**When you modify `package.json` scripts**:
1. Update inline section comments in package.json itself
2. Update `package.json.scripts.md` with detailed explanation of the script
3. Update README.md "Available Scripts" section (quick reference only)
4. Add/update related test cases if the script affects testable behavior

**Script Documentation Levels**:
- `package.json`: Inline section headers (brief)
- `package.json.scripts.md`: Comprehensive documentation (what, when, how, warnings)
- `README.md`: Quick reference list (one-line descriptions)

### README.md Changes
**When you modify `README.md`**:
1. Ensure all referenced scripts exist in package.json
2. Verify all file paths and examples are current
3. Update screenshots section if UI changes
4. Keep tech stack versions accurate
5. Cross-reference `package.json.scripts.md` for detailed script docs

### Test Changes
**When you add/modify features**:
1. Add unit tests (Jest) for utilities and business logic
2. Add E2E tests (Playwright) for user flows
3. Update `docs/testing.md` if test patterns change
4. Ensure test commands in package.json are documented
5. Update `package.json.scripts.md` if new test scripts added

### Critical Files to Keep in Sync
- `package.json` ↔ `package.json.scripts.md` ↔ `README.md` (scripts, detailed docs, quick ref)
- `prisma/schema.prisma` ↔ `docs/data-flow.md` (data models)
- `components/` ↔ `docs/components.md` (component taxonomy)
- New features → tests + documentation
- Environment variables → `env.example`, `package.json.scripts.md`, `README.md`

### Checklist Before Committing
- [ ] package.json scripts have inline section headers
- [ ] package.json.scripts.md has detailed documentation for all scripts
- [ ] README.md reflects all script changes (quick reference)
- [ ] Tests exist for new features
- [ ] Documentation files updated (docs/*.md)
- [ ] env.example updated if new env vars added
- [ ] All three documentation levels are consistent (package.json, package.json.scripts.md, README.md)
